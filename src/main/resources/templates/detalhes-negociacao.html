<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Detalhes da Negociação</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech&display=swap" rel="stylesheet">
  <style>
    .container-flex {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }
    .card {
        background: white;
        padding: 20px;
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        flex: 1;
        min-width: 300px;
    }
    .card.bg-light {
     border: 2px dashed #ffc107;
    }

    .profile-img {
    width: 120px;
    height: 120px;
    border-radius: 100%;
    border: 2px solid #ddd;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
  }
  .header {
        margin-top: 30px;
        margin-bottom: 30px;
  }
  </style>
</head>
<body>

<th:block th:replace="fragments/layout :: header"/>

<div class="card text-center mb-4" style="background-color: #ffffff; border: none;">
  <h2 class="mb-0" th:text="'Negociação: ' + ${negociacao.imovel.titulo}">Negociação</h2>
</div>

<div class="container-flex">

  <!-- ESQUERDA - OBSERVAÇÃO E ANEXO -->
  <div class="card" style="font-family: "Share Tech", sans-serif;">
    <h4>Detalhes da Negociação</h4>
    <p><strong>Status:</strong> <span th:text="${negociacao.status}"></span></p>
    <p><strong>Data da Negociação:</strong> <span th:text="${negociacao.dataNegociacao}"></span></p>
    <p><strong>Valor Proposto:</strong> R$ <span th:text="${negociacao.valorProposto}"></span></p>
    <p><strong>Imobiliária:</strong> <span th:text="${negociacao.imobiliaria.nome}"></span></p>

    <hr>
    <h5 class="mb-3">Tempo no Status Atual</h5>
    <i class="bi bi-hourglass-split fs-1 text-warning"></i>
    <p class="fs-4 text-[[${corAlerta}]] mt-2">
      <strong th:text="${diasParado}">0</strong> dias
    </p>
    <p class="text-muted">desde que a negociação entrou no status: <strong th:text="${negociacao.status}">Status</strong></p>
  </div>

  <!-- CENTRO - DETALHES DA NEGOCIAÇÃO E IMÓVEL -->
  <div class="card">

    <h5>Imóvel Negociado</h5>
    <p><strong>Título:</strong> <span th:text="${negociacao.imovel.titulo}"></span></p>
    <p><strong>Descrição:</strong> <span th:text="${negociacao.imovel.descricao}"></span></p>
    <p><strong>Endereço:</strong> <span th:text="${negociacao.imovel.endereco}"></span></p>
    <p><strong>Tipo:</strong> <span th:text="${negociacao.imovel.tipoImovel}"></span></p>
    <p><strong>Metragem:</strong> <span th:text="${negociacao.imovel.metragem} + ' m²'"></span></p>
    <p><strong>Quartos:</strong> <span th:text="${negociacao.imovel.quartos}"></span></p>
    <p><strong>Banheiros:</strong> <span th:text="${negociacao.imovel.banheiros}"></span></p>
    <p><strong>Vagas:</strong> <span th:text="${negociacao.imovel.vagas}"></span></p>
    <p><strong>Preço:</strong> R$ <span th:text="${negociacao.imovel.preco}"></span></p>
    <p><strong>Preço Condomínio:</strong> R$ <span th:text="${negociacao.imovel.precoCondominio}"></span></p>
    <p><strong>Status:</strong> <span th:text="${negociacao.imovel.status}"></span></p>
  </div>

  <!-- DIREITA - CLIENTE E IMOBILIÁRIA -->
  <div class="card text-center">
    <div class="d-flex justify-content-center mb-3">
      <div class="profile-img d-flex align-items-center justify-content-center bg-light text-secondary">
        <i class="bi bi-person fs-1"></i>
      </div>
    </div>

    <h5 th:text="${negociacao.cliente.nome}">Cliente</h5>
    <p th:text="${negociacao.cliente.email}">Email</p>
    <p th:text="${negociacao.cliente.telefone}">Telefone</p>
    <p th:text="${negociacao.cliente.endereco}">Endereço</p>

    <hr>
    <h5>Imobiliária</h5>
    <p th:text="${negociacao.imobiliaria.nome}">Nome</p>
    <p th:text="${negociacao.imobiliaria.email}">Email</p>
    <p th:text="${negociacao.imobiliaria.telefone}">Telefone</p>
    <p th:text="${negociacao.imobiliaria.endereco}">Endereço</p>
  </div>

</div>

</body>
</html>
